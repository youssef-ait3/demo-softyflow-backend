<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"
    />

    <title><%= title %></title>
    <script src="https://unpkg.com/vue@2/dist/vue.js"></script>
    <!-- import JavaScript -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
  </head>

  <body>
    <div id="app">
      <div
      class="component-list2"
      style="padding: 15px; border: dotted; background-color: #f1f2f5"
      >
      <% items.items.forEach(function(element) { %> 
        <% if (element.management.available) { %>
        <span>
          <% if (element.typee === "input") { %>
            <el-input placeholder="Please input" v-model="<%= element.model%>" style="display: <%= element.management.visible ? 'block' : 'none' %>"></el-input>
          <% } else if (element.typee === 'radio-button') { %>
            <el-radio v-model="<%= element.model%>" label="1" style="display: <%= element.management.visible ? 'block' : 'none' %>">Option A</el-radio>
          <% } else if (element.typee === 'dropdown') { %>
            <el-dropdown style="display: <%= element.management.visible ? 'block' : 'none' %>">
            <span class="el-dropdown-link">
              Dropdown List<i class="el-icon-arrow-down el-icon--right"></i>
            </span>
            <el-dropdown-menu slot="dropdown">
              <el-dropdown-item>Action 1</el-dropdown-item>
              <el-dropdown-item disabled>Action 2</el-dropdown-item>
              </el-dropdown-menu>
          </el-dropdown>
          <% } else if (element.typee === 'file-upload') { %>
            <el-upload class="upload-demo" action="https://jsonplaceholder.typicode.com/posts/"
              :on-preview="handlePreview" :on-remove="handleRemove" :before-remove="beforeRemove" multiple
              :limit="3" :on-exceed="handleExceed" :file-list="fileList" style="display: <%= element.management.visible ? 'block' : 'none' %>">
            <el-button size="small" type="primary">Click to upload</el-button>
              <div slot="tip" class="el-upload__tip">jpg/png files with a size less than 500kb</div>
          </el-upload>
          <% } else if (element.typee === 'button') { %>
            <el-button type="primary" @click="element.handle" style="display: <%= element.management.visible ? 'block' : 'none' %>">Primary</el-button>
          <% } else if (element.typee === 'text-area') { %>
            <el-input type="textarea" :rows="2" placeholder="Please input" v-model="<%= element.model%>" style="display: <%= element.management.visible ? 'block' : 'none' %>"></el-input>
          <% } %>
        </span>
        <% } %>
        <% }) %>
      </div>
      
    </div>
  </body>

  <script>
    const itemsData = <%- JSON.stringify(items) %>;
    const models = {};
    console.log('itemsData.fonction',itemsData.fonction);
    itemsData.items.forEach(el => {
          models[el.model] = '';
        });
    new Vue({
      el: '#app',
      data: function() {
        return {visible: false, itemsData: itemsData, fileList: [], textarea: '' , ... models,}
      },
      methods: {
        handlePreview: function (file) {
        console.log('File preview: ', file);
        },
        handleRemove: function (file, fileList) {
        console.log('File removed: ', file, fileList);
        },
        beforeRemove: function (file, fileList) {
          return this.$confirm(`Remove file ${file.name}?`);
        },
        handleExceed: function (files, fileList) {
          this.$message.warning(`The maximum number of files is 3.`);
        },
        ...itemsData.fonction
      },
    });
  </script>
  <style>
    .container-list2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-gap: 10px;
      align-content: center;
    }

    .component-list2 {
      height: 50px;
      min-width: 450px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      background: #d3dce6;
      justify-content: space-around;
    }
  </style>
</html>
